#!/bin/bash

#### the wired ethernet way
# activate wired ethernet connection
networksetup -setnetworkserviceenabled usb3_to_ethernet on
sleep 10 # give networking utility time to establish connection
# connect to drive (this relies on Finder)
  # con: must have Finder running
  # pro: uses stored username/password
open -g 'smb://rds6.cchmc.org/DBE-64/CB'
sleep 10 # give finder time to connect and mount drive
drive_location='/Volumes/CB'

#### the Transmit mount way (must mount drive using Transit first)
# drive_location='/Volumes/cchmc/rds/DBE-64/CB/'


#### the backup
backup_locs=( "Desktop" "Biostatistics" "Documents" "dotfiles" "Downloads")

# rsync
for folder in "${backup_locs[@]}" ; do
    echo "Backing up $folder"
    rsync -a --delete --exclude='cache/' --exclude='.git/' /Users/cole/${folder}/ ${drive_location}${folder}
done

# turn wired ethernet connection off
networksetup -setnetworkserviceenabled usb3_to_ethernet off
